unit TestThCanvasEditor;
{

  Delphi DUnit Test Case
  ----------------------
  This unit contains a skeleton test case class generated by the Test Case Wizard.
  Modify the generated code to correctly setup and call the methods from the unit
  being tested.

}

interface

uses
  TestFramework, BaseTestUnit, ThContainer, ThCanvasEditor,
  System.Types, System.SysUtils;

type
  TestTThCanvasEditor = class(TBaseTestUnit)
  published
    // #50 드래그하여 캔버스를 이동할 수 있어야 한다.
    procedure TestTracking;

    // #44 음수영역의 좌표로도 이동가능해야 한다.
    procedure TestTrackingMinusArea;

    // #51 영역밖으로 드래그 시 캔버스 이동이 계속 되어야 한다.
    procedure TestTrackingOutOfArea;
  end;

implementation

uses
  UnitTestForm, FMX.TestLib;

procedure TestTThCanvasEditor.TestTracking;
begin
  MousePath.Clear;
  MousePath.SetInitialPoint(GetInitialPoint);
  MousePath.Add(50, 50);
  MousePath.Add(100, 100);
  MousePath.Add(100, 150);
  MousePath.Add(150, 150);
  MousePath.Add(200, 200);

  TestLib.RunMousePath(MousePath.Path);

  Check(
    (FCanvas.ContentPos.X = 150) and (FCanvas.ContentPos.X = 150)
    , Format('FCanvas.Postion : %f, %f', [FCanvas.ContentPos.X, FCanvas.ContentPos.X])
  );
end;

procedure TestTThCanvasEditor.TestTrackingMinusArea;
begin
  MousePath.Clear;
  MousePath.SetInitialPoint(GetInitialPoint);
  MousePath.Add(150, 150);
  MousePath.Add(100, 100);
  MousePath.Add(100, 150);
  MousePath.Add(150, 100);
  MousePath.Add(0, 0);

  TestLib.RunMousePath(MousePath.Path);

  Check(
    (FCanvas.ContentPos.X = -150) and (FCanvas.ContentPos.X = -150)
    , Format('FCanvas.Postion : %f, %f', [FCanvas.ContentPos.X, FCanvas.ContentPos.X])
  );
end;

procedure TestTThCanvasEditor.TestTrackingOutOfArea;
begin
  // 50 to -200
  MousePath.Clear;
  MousePath.SetInitialPoint(GetInitialPoint);
  MousePath.Add(50, 50);
  MousePath.Add(0, 50);
  MousePath.Add(-200, 50);

  TestLib.RunMousePath(MousePath.Path);

  Check(
    (FCanvas.ContentPos.X = -250)
    , Format('FCanvas.Postion : %f, %f', [FCanvas.ContentPos.X, FCanvas.ContentPos.X])
  );
end;

initialization
  RegisterTest(TestTThCanvasEditor.Suite);

end.

